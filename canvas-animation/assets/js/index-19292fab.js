var e=Object.defineProperty,n=(n,a,t)=>(((n,a,t)=>{a in n?e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t})(n,"symbol"!=typeof a?a+"":a,t),t);import{d as a,U as t,V as i,F as o,W as r,u as s,X as l,Y as u,l as c,n as d,o as m,b as g,c as h,S as p}from"./@vue-1c025e39.js";import{a0 as f}from"./@ant-design-e3f1f052.js";import{m as v,A as y}from"./ant-design-vue-c42be130.js";import"./@ctrl-4982d949.js";import"./@babel-ffde0202.js";import"./resize-observer-polyfill-0806acab.js";import"./vue-types-6bcea8eb.js";import"./dom-align-8ffb71ea.js";import"./lodash-es-31e57f84.js";import"./dayjs-26ee319a.js";import"./async-validator-8d480e59.js";import"./scroll-into-view-if-needed-2e4c95c3.js";import"./compute-scroll-into-view-2962e95c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)})).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();const O=[{name:"Attention seekers",children:[{name:"bounce",duration:1e3},{name:"flash",duration:1e3},{name:"pulse",duration:1e3},{name:"rubberBand",duration:1e3},{name:"shakeX",duration:1e3},{name:"shakeY",duration:1e3},{name:"headShake",duration:1e3},{name:"swing",duration:1e3},{name:"tada",duration:1e3},{name:"wobble",duration:1e3},{name:"jello",duration:1e3},{name:"heartBeat",duration:1e3}]},{name:"Back entrances",children:[{name:"backInDown",duration:1e3},{name:"backInLeft",duration:1e3},{name:"backInRight",duration:1e3},{name:"backInUp",duration:1e3}]},{name:"Back exits",children:[{name:"backOutDown",duration:1e3},{name:"backOutLeft",duration:1e3},{name:"backOutRight",duration:1e3},{name:"backOutUp",duration:1e3}]},{name:"Bouncing entrances",children:[{name:"bounceIn",duration:1e3},{name:"bounceInDown",duration:1e3},{name:"bounceInLeft",duration:1e3},{name:"bounceInRight",duration:1e3},{name:"bounceInUp",duration:1e3}]},{name:"Bouncing exits",children:[{name:"bounceOut",duration:1e3},{name:"bounceOutDown",duration:1e3},{name:"bounceOutLeft",duration:1e3},{name:"bounceOutRight",duration:1e3},{name:"bounceOutUp",duration:1e3}]},{name:"Fading entrances",children:[{name:"fadeIn",duration:1e3},{name:"fadeInDown",duration:1e3},{name:"fadeInDownBig",duration:1e3},{name:"fadeInLeft",duration:1e3},{name:"fadeInLeftBig",duration:1e3},{name:"fadeInRight",duration:1e3},{name:"fadeInRightBig",duration:1e3},{name:"fadeInUp",duration:1e3},{name:"fadeInUpBig",duration:1e3}]},{name:"Fading exits",children:[{name:"fadeOut",duration:1e3},{name:"fadeOutDown",duration:1e3},{name:"fadeOutDownBig",duration:1e3},{name:"fadeOutLeft",duration:1e3},{name:"fadeOutLeftBig",duration:1e3},{name:"fadeOutRight",duration:1e3},{name:"fadeOutRightBig",duration:1e3},{name:"fadeOutUp",duration:1e3},{name:"fadeOutUpBig",duration:1e3}]},{name:"Flippers",children:[{name:"flip",duration:1e3},{name:"flipInX",duration:1e3},{name:"flipInY",duration:1e3},{name:"flipOutX",duration:1e3},{name:"flipOutY",duration:1e3}]},{name:"Lightspeed",children:[{name:"lightSpeedInRight",duration:1e3},{name:"lightSpeedInLeft",duration:1e3},{name:"lightSpeedOutRight",duration:1e3},{name:"lightSpeedOutLeft",duration:1e3}]},{name:"Rotating entrances",children:[{name:"rotateIn",duration:1e3},{name:"rotateInDownLeft",duration:1e3},{name:"rotateInDownRight",duration:1e3},{name:"rotateInUpLeft",duration:1e3},{name:"rotateInUpRight",duration:1e3}]},{name:"Rotating exits",children:[{name:"rotateOut",duration:1e3},{name:"rotateOutDownLeft",duration:1e3},{name:"rotateOutDownRight",duration:1e3},{name:"rotateOutUpLeft",duration:1e3},{name:"rotateOutUpRight",duration:1e3}]},{name:"Specials",children:[{name:"hinge",duration:1e3},{name:"jackInTheBox",duration:1e3},{name:"rollIn",duration:1e3},{name:"rollOut",duration:1e3}]},{name:"Zooming entrances",children:[{name:"zoomIn",duration:1e3},{name:"zoomInDown",duration:1e3},{name:"zoomInLeft",duration:1e3},{name:"zoomInRight",duration:1e3},{name:"zoomInUp",duration:1e3}]},{name:"Zooming exits",children:[{name:"zoomOut",duration:1e3},{name:"zoomOutDown",duration:1e3},{name:"zoomOutLeft",duration:1e3},{name:"zoomOutRight",duration:1e3},{name:"zoomOutUp",duration:1e3}]},{name:"Sliding entrances",children:[{name:"slideInUp",duration:1e3},{name:"slideInDown",duration:1e3},{name:"slideInLeft",duration:1e3},{name:"slideInRight",duration:1e3}]},{name:"Sliding exits",children:[{name:"slideOutUp",duration:1e3},{name:"slideOutDown",duration:1e3},{name:"slideOutLeft",duration:1e3},{name:"slideOutRight",duration:1e3}]}],b={class:"animation-list"},w={class:"animation-title"},_=["onClick"],I=a({__name:"animationList",emits:["selectAnimation"],setup:(e,{emit:n})=>(e,a)=>(t(),i("div",b,[(t(!0),i(o,null,r(s(O),(e=>(t(),i("div",{class:"animation-header",key:e.name},[l("h2",w,u(e.name),1),(t(!0),i(o,null,r(e.children,(e=>(t(),i("div",{class:"animation-item",key:e.name,onClick:a=>{return t=e.name,i=e.duration,void n("selectAnimation",t,i);var t,i}},u(e.name),9,_)))),128))])))),128))]))}),S={range:[0,100],originTranslate:[0,0],translate:[0,0],originScale:[1,1],scale:[1,1],originOpacity:1,opacity:1,change:!0},x={bounce:[{...S,range:[0,20],change:!1},{...S,range:[20,40],originTranslate:[0,0],translate:[0,-30],originScale:[1,1],scale:[1,1.1]},{...S,range:[40,43],translate:[0,-30],scale:[1,1.1],change:!1},{...S,range:[43,53],originTranslate:[0,-30],translate:[0,0],originScale:[1,1.1],scale:[1,1]},{...S,range:[53,70],originTranslate:[0,0],translate:[0,-15],originScale:[1,1],scale:[1,1.05]},{...S,range:[70,80],originTranslate:[0,-15],translate:[0,0],originScale:[1,1.05],scale:[1,.95]},{...S,range:[80,90],originTranslate:[0,0],translate:[0,-4],originScale:[1,.95],scale:[1,1.02]},{...S,range:[90,100],change:!1}],flash:[{...S,range:[0,25],originOpacity:1,opacity:0},{...S,range:[25,50],originOpacity:0,opacity:1},{...S,range:[50,75],originOpacity:1,opacity:0},{...S,range:[75,100],originOpacity:0,opacity:1}],pulse:[{...S,range:[0,50],originScale:[1,1],scale:[1.05,1.05]},{...S,range:[50,100],originScale:[1.05,1.05],scale:[1,1]}],rubberBand:[{...S,range:[0,30],originScale:[1,1],scale:[1.25,.75]},{...S,range:[30,40],originScale:[1.25,.75],scale:[.75,1.25]},{...S,range:[40,50],originScale:[.75,1.25],scale:[1.15,.85]},{...S,range:[50,65],originScale:[1.15,.85],scale:[.95,1.05]},{...S,range:[65,75],originScale:[.95,1.05],scale:[1.05,.95]},{...S,range:[75,100],originScale:[1.05,.95],scale:[1,1]}]};class L{constructor(e,a,t){n(this,"_ctx"),n(this,"_duration"),n(this,"_startTime"),n(this,"_animationTyep"),n(this,"_draw"),n(this,"_clearRect"),n(this,"_progressing"),this._ctx=e,this._duration=0,this._startTime=0,this._animationTyep="",this._draw=a,this._clearRect=t,this._progressing=!1}setOptions(e){this._animationTyep=e.type,this._duration=e.duration}start(){this._progressing=!0,this._startTime=Date.now(),this._action()}_action(){if(!this._progressing)return;const e=Date.now()-this._startTime;if(e>this._duration)return void(this._progressing=!1);const n=((e,n)=>{const a=x[e],t=a.findIndex((e=>n>=e.range[0]&&n<=e.range[1])),i=a[t];if(!i.change)return{translate:i.translate,scale:i.scale,opacity:i.opacity};const o=i.range[1]-i.range[0],r=(n-i.range[0])/o;return{translate:[(i.translate[0]-i.originTranslate[0])*r+i.originTranslate[0],(i.translate[1]-i.originTranslate[1])*r+i.originTranslate[1]],scale:[(i.scale[0]-i.originScale[0])*r+i.originScale[0],(i.scale[1]-i.originScale[1])*r+i.originScale[1]],opacity:(i.opacity-i.originOpacity)*r+i.originOpacity}})(this._animationTyep,e/this._duration*100);this._clearRect(),this._ctx.save(),this._ctx.scale(...n.scale),this._ctx.translate(...n.translate),this._ctx.globalAlpha=n.opacity,this._draw(),this._ctx.restore(),window.requestAnimationFrame(this._action.bind(this))}stop(){this._progressing=!1}}const R={class:"canvas-animation-body"},k={class:"github-block"},B={class:"canvas-animation-list"},T="Animate.css",D=p(a({__name:"App",setup(e){const n=c(),a=c(),o=c();let r,u=0,p=0;d((()=>{a.value&&n.value&&document.fonts.ready.then((()=>{if(O(),o.value){const e=o.value;r=new L(e,(()=>{w(e,T,u,p)}),b)}}))}));const y=(e,n)=>{if(console.log(e,n),!x[e])return v.error("该动画暂未实现");r.setOptions({type:e,duration:n}),r.start()},O=()=>{if(a.value&&n.value){const e=n.value.clientWidth,t=n.value.clientHeight;a.value.style.width=`${e}px`,a.value.style.height=`${t}px`;const i=window.devicePixelRatio;a.value.width=e*i,a.value.height=t*i,o.value||(o.value=a.value.getContext("2d",{willReadFrequently:!0})),o.value.scale(i,i),b(),o.value.font="normal bold 64px 'Work Sans'",o.value.fillStyle="#351c75";const r=o.value.measureText(T),s=r.actualBoundingBoxRight-r.actualBoundingBoxLeft,l=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent;u=-s/2,p=l/2,o.value.translate(e/2,t/2),w(o.value,T,u,p)}},b=()=>{if(a.value&&o.value){const e=a.value.clientWidth,n=a.value.clientHeight;o.value.clearRect(-e/2,-n/2,a.value.width,a.value.height)}},w=(e,n,a,t)=>{e.save(),e.fillText(n,a,t),e.restore()},_=()=>{window.open("https://github.com/moneyinto/canvas-animation")};return m((()=>{window.addEventListener("resize",O)})),g((()=>{window.removeEventListener("resize",O)})),(e,o)=>(t(),i("div",R,[l("div",k,[h(s(f),{class:"github-icon",onClick:_})]),l("div",{ref_key:"canvasContainer",ref:n,class:"canvas-container"},[l("canvas",{ref_key:"canvas",ref:a},null,512)],512),l("div",B,[h(I,{onSelectAnimation:y})])]))}}));D.use(y),D.mount("#app"),v.config({maxCount:1});
